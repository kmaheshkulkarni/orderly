<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lightweight Reproducible Reporting • orderly</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Lightweight Reproducible Reporting">
<meta property="og:description" content="Order, create and store reports from R.  By defining a
    lightweight interface around the inputs and outputs of an
    analysis, a lot of the repetitive work for reproducible research
    can be automated.  We define a simple format for organising and
    describing work that facilitates collaborative reproducible
    research and acknowledges that all analyses are run multiple
    times over their lifespans.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">orderly</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/orderly.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/changelog.html">orderly changelog</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/vimc/orderly">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<div id="orderly" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#orderly" class="anchor"></a>orderly</h1></div>

<blockquote>
<ol>
<li>an attendant in a hospital responsible for the non-medical care of patients and the maintenance of order and cleanliness.</li>
<li>a soldier who carries orders or performs minor tasks for an officer.</li>
</ol>
</blockquote>
<p><code>orderly</code> is a package designed to help make analysis more <a href="https://en.wikipedia.org/wiki/Reproducibility">reproducible</a>. Its principal aim is to automate a series of basic steps in the process of writing analyses, making it easy to:</p>
<ul>
<li>track all inputs into an analysis (packages, code, and data resources)</li>
<li>store multiple versions of an analysis where it is repeated</li>
<li>track outputs of an analysis</li>
<li>create analyses that depend on the outputs of previous analyses</li>
</ul>
<p>With <code>orderly</code> we have two main hopes:</p>
<ul>
<li>analysts can write code that will straightforwardly run on someone else’s machine (or a remote machine)</li>
<li>when an analysis that is run several times starts behaving differently it will be easy to see when the outputs started changing, and what inputs started changing at the same time</li>
</ul>
<p><code>orderly</code> requires a few conventions around organisation of a project, and after that tries to keep out of your way. However, these requirements are designed to make collaborative development with git easier by minimising conflicts and making backup easier by using an append-only storage system.</p>
<div id="the-problem" class="section level2">
<h2 class="hasAnchor">
<a href="#the-problem" class="anchor"></a>The problem</h2>
<p>One often-touted goal of R over point-and-click analyses packages is that if an analysis is scripted it is more reproducible. However, essentially all analyses depend on external resources - packages, data, code, and R itself; any change in these external resources might change the results. Preventing such changes in external resources is not always possible, but <em>tracking</em> changes should be straightforward - all we need to know is what is being used.</p>
<p>For example, while reproducible research <a href="https://cran.r-project.org/view=ReproducibleResearch">has become synonymous with literate programming</a> this approach often increases the number of external resources. A typical <a href="https://cran.r-project.org/package=knitr"><code>knitr</code></a> document will depend on:</p>
<ul>
<li>the source file (<code>.Rmd</code> or <code>.Rnw</code>)</li>
<li>templates used for styling</li>
<li>data that is read in for the analysis</li>
<li>code that is directly read in with <code>source</code>
</li>
</ul>
<p>The <code>orderly</code> package helps by</p>
<ul>
<li>collecting external resources before an analysis</li>
<li>ensuring that all required external resources are identified</li>
<li>removing any manual work in tracking information about these external resources</li>
<li>allowing running reports multiple times and making it easy to see what changed and why</li>
</ul>
<p>The core problem is that analyses have no general <em>interface</em>. Consider in contrast that role that functions take in programming. All functions have a set of arguments (inputs) and a return value (outputs). With <code>orderly</code>, we borrow this idea, and each piece of analysis will require that the user describes what is needed and what will be produced.</p>
</div>
<div id="the-process" class="section level2">
<h2 class="hasAnchor">
<a href="#the-process" class="anchor"></a>The process</h2>
<p>The user describes the inputs of their analysis, including:</p>
<ul>
<li>SQL queries (if using databases)</li>
<li>Required R sources</li>
<li>External resource files (e.g., csv data files, Rmd files, templates)</li>
<li>Packages required to run the analysis</li>
<li>Dependencies on previously run analyses</li>
</ul>
<p>The user also provides a list of “artefacts” (file-based results) that they will produce.</p>
<p>Then <code>orderly</code>:</p>
<ol>
<li>creates a new empty directory</li>
<li>copies over <em>only</em> the declared file resources</li>
<li>loads only the declared packages</li>
<li>loads the declared R sources</li>
<li>evaluates any sql queries to create R objects</li>
<li>then runs then analysis</li>
<li>verifies that the declared artefacts are produced</li>
</ol>
<p>It then stores metadata alongside the analysis including <a href="https://en.wikipedia.org/wiki/Hash_function">md5 hashes</a> of all inputs and outputs, copies of data extracted from the database, a record of all R packages loaded at the end of the session, and (if using git) information about the git state (hash, branch and status).</p>
</div>
<div id="workflows-with-orderly" class="section level2">
<h2 class="hasAnchor">
<a href="#workflows-with-orderly" class="anchor"></a>Workflows with <code>orderly</code>
</h2>
<p>In the <a href="https://www.imperial.ac.uk/mrc-global-infectious-disease-analysis">MRC Centre for Global Infectious Disease Analysis</a> we use <code>orderly</code> on two major projects:</p>
<ul>
<li>The <a href="https://www.vaccineimpact.org/">Vaccine Impact Modelling Consortium</a>
</li>
<li>Our part of the response to the 2018-2019 Ebola outbreak in the Democratic Republic of Congo</li>
</ul>
<p>The workflows we have developed here are oriented towards collaborative groups of researchers - other workflows are possible (indeed <code>orderly</code> is also designed to support a <em>decentralised</em> workflow, though this has not been used in practice yet).</p>
<p>In these projects we have a group of researchers who develop and test analyses locally. These are developed on a <a href="https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging">branch in git</a> and then run on a centralised <em>staging environment</em> (a duplicate of our production environment). The code and outputs are reviewed with the help of <a href="https://help.github.com/en/articles/about-pull-requests">GitHub’s “Pull requests”</a> and then the reports are run on our production environment.</p>
<p>Interaction with the remote environments is achieved using an <a href="https://github.com/vimc/montagu-reporting-api">HTTP API</a> which <code>orderly</code> itself transparently uses, so that reports can be run remotely, <a href="https://vimc.github.io/orderly/reference/orderly_run_remote.html">directly from R</a>. The remote systems also include an interactive web interface that can be used to explore and download versions of analyses, as well as run new ones.</p>
</div>
<div id="internal-database-schema" class="section level2">
<h2 class="hasAnchor">
<a href="#internal-database-schema" class="anchor"></a>Internal database schema</h2>
<p><code>orderly</code> has a database, which should be the preferred way of querying the report archive from other programs. The schema is programmatically described at <a href="inst/database/schema.yml"><code>inst/database/schema.yml</code></a> and automatically generated database documentation is available <a href="https://vimc.github.io/orderly/schema">here</a>.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("drat")</span>
drat<span class="op">:::</span><span class="kw">add</span>(<span class="st">"vimc"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"orderly"</span>)</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/vimc/orderly">https://​github.com/​vimc/​orderly</a>
</li>
<li>Report a bug at <br><a href="https://github.com/vimc/orderly/issues">https://​github.com/​vimc/​orderly/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Rich FitzJohn <br><small class="roles"> Author, maintainer </small>  </li>
<li>Robert Ashton <br><small class="roles"> Author </small>  </li>
<li>Alex Hill <br><small class="roles"> Author </small>  </li>
<li>Martin Eden <br><small class="roles"> Author </small>  </li>
<li>Wes Hinsley <br><small class="roles"> Author </small>  </li>
<li>Emma Russell <br><small class="roles"> Author </small>  </li>
<li>James Thompson <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#wip"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a></li>
<li><a href="https://travis-ci.org/vimc/orderly"><img src="https://travis-ci.org/vimc/orderly.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/richfitz/orderly"><img src="https://ci.appveyor.com/api/projects/status/github/vimc/orderly?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/vimc/orderly?branch=master"><img src="https://codecov.io/github/vimc/orderly/coverage.svg?branch=master" alt="codecov.io"></a></li>
</ul>
</div>
</div>
</div>

      <footer><div class="copyright">
  <p>Developed by Rich FitzJohn, Robert Ashton, Alex Hill, Martin Eden, Wes Hinsley, Emma Russell, James Thompson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
