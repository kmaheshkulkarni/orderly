<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>orderly • orderly</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="orderly">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">orderly</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/orderly.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/changelog.html">orderly changelog</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/vimc/orderly">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>orderly</h1>
                        <h4 class="author">Rich FitzJohn</h4>
            
            <h4 class="date">2019-08-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/vimc/orderly/blob/master/vignettes/orderly.Rmd"><code>vignettes/orderly.Rmd</code></a></small>
      <div class="hidden name"><code>orderly.Rmd</code></div>

    </div>

    
    
<div id="the-problem" class="section level2">
<h2 class="hasAnchor">
<a href="#the-problem" class="anchor"></a>The problem</h2>
<p>Suppose that we have an SQL database that is used for a series of “reports” (e.g., graphs, knitr documents, data exports). These reports might change because:</p>
<ul>
<li>the data in the SQL database changes</li>
<li>we apply the reporting scripts to different subsets of the data</li>
<li>the code that we use to generate the scripts changes</li>
</ul>
<p>(among other more pathological reasons such as the packages that we’re using changing behaviour, etc)</p>
<p>We would like to be able to generate reports easily from the database and later on compare two reports and easily be able to determine <em>why</em> two versions of a report differ - particularly with respect to the above criteria. We’d also like to be able to get the original data that was used to create the reports (even if the SQL database has moved on) and the original scripts that were used to create the reports.</p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>As an example, we have a directory at <code>path</code> that contains orderly sources. Typically this would be in the working directory (and in that case the <code>root</code> argument may be omitted) but for this vignette the path will be passed in explicitly.</p>
<p>The <code>orderly.yml</code> to describe the creation of a report might look like:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">data:</span>
  <span class="fu">cars:</span>
    <span class="fu">query:</span><span class="at"> SELECT * FROM mtcars WHERE cyl = ?cyl</span>
<span class="fu">parameters:</span>
  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Arithmetic">-</a></span> cyl
<span class="fu">script:</span><span class="at"> script.R</span>
<span class="fu">artefacts:</span>
  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Arithmetic">-</a></span> <span class="fu">staticgraph:</span>
      <span class="fu">filenames:</span><span class="at"> disp_vs_wt.png</span>
      <span class="fu">description:</span><span class="at"> plot of displacement vs weight</span>
  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Arithmetic">-</a></span> <span class="fu">staticgraph:</span>
      <span class="fu">filenames:</span><span class="at"> distribution.png</span>
      <span class="fu">description:</span><span class="at"> overall distribution of displacement</span></code></pre></div>
<p>Hopefully this is somewhat self explanatory:</p>
<ul>
<li><p><code>data</code> is the data sets to pull from the database; it is a named list with one or more elements. Each element is a list with a <code>query</code> element containing a SQL query that specifies the required data. You can use placeholders like <code>?cyl</code> in the above example to stand in for <em>parameters</em> that will be passed through to the report.</p></li>
<li><p><code>parameters</code> is a list of parameters used to query the SQL database. Note the that only the <em>names</em> of the parameters are provided here - the values will be provided when the report is run.</p></li>
<li><p><code>script.R</code> is the R script that will be run to do the actual work of the report - any R code can be used here.</p></li>
<li><p><code>artefacts</code> is a list of “artefacts” that are created by the <code>script</code>; these are <em>files</em> that contain the report itself. There can be more than one artefact (there are two here). Under each filename, list the <code>format</code> (<code>"staticgraph"</code>, <code>"interactivegraph"</code>, <code>"data"</code> for now) and a free-text description.</p></li>
</ul>
<p>There are other optional fields that can be added to the yaml (and <code>parameters</code> is optional) but this is the core. The file <code>script.R</code> for this report contains</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co">## Plot of displacement vs weight</span>
png(<span class="st">"disp_vs_wt.png"</span>)
plot(disp ~ wt, cars)
dev.off()

<span class="co">## Overall distribution of displacement</span>
png(<span class="st">"distribution.png"</span>)
hist(cars$disp, main = sprintf(<span class="st">"(for %d cylinder cars)"</span>, cyl))
dev.off()</code></pre></div>
<p>The important thing here is that the report references the variable <code>cars</code> and <code>cyl</code> even though it does not create them! It must produce the files that are mentioned in <code>artefacts</code> (<code>disp_vs_wt.png</code> and <code>distribution.png</code>). The R code can be as long and as short as needed and can use whatever packages it needs. <code>orderly</code> does not do anything with the script apart from run it so it can be formatted however (there are no magic comments, etc). There is no restrictions on what can be done except:</p>
<ul>
<li>don’t try to directly access the database</li>
<li>the script must create the artefacts listed in <code>orderly.yml</code>
</li>
</ul>
<p>There is some more infrastructure that needs to be put in place around this; how does the report access the SQL database? And where to the generated reports reside?</p>
<pre class="plain"><code>&lt;root&gt;
|-+= archive
| \--= README.md
|-+= data
| \--= README.md
|-+= draft
| \--= README.md
|-+= src
| |-+= example
| | |--= orderly.yml
| | \--= script.R
| \--= README.md
|--= README.md
|--= orderly_config.yml
|--= source.R
\--= source.sqlite</code></pre>
<p>The directories will be discussed in further detail below but we have:</p>
<ul>
<li>
<code>archive</code> - completed reports. These are reports that we might distribute to people or synchronise with a central point.</li>
<li>
<code>data</code> - copies of the data used to create reports, stored so that reports can be rerun later.</li>
<li>
<code>draft</code> - draft reports. Every run of a report will create a new directory in here, but relatively few of these will be “final” reports. So reports exist here before being copied to <code>archive</code>.</li>
<li>
<code>src</code> - the report <em>sources</em>; the files <code>orderly.yml</code> and <code>script.R</code> are the files from above.</li>
<li>
<code>orderly_config.yml</code> - this is the global configuration</li>
<li>
<code>source.sqlite</code> - this is the example database used here</li>
</ul>
<p>The global configuration looks like:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">database:</span>
  <span class="fu">source:</span>
    <span class="fu">driver:</span><span class="at"> RSQLite::SQLite</span>
    <span class="fu">args:</span>
      <span class="fu">dbname:</span><span class="at"> source.sqlite</span>

<span class="fu">changelog:</span>
  <span class="fu">label1:</span>
    <span class="fu">public:</span><span class="at"> true</span>
  <span class="fu">label2:</span>
    <span class="fu">public:</span><span class="at"> false</span></code></pre></div>
<p>This defines the field <code>database</code>, which describes the databases that we pull results from (the databases that the report queries are run against). Each entry (here there is one called <code>source</code>) contains a field <code>driver</code> which must declare a DBI-compatible driver (realistically this is going to be <code><a href="https://www.rdocumentation.org/packages/RSQLite/topics/SQLite">RSQLite::SQLite</a></code> for a local SQLite database and <code>RPostgres::Posgres</code> for accessing a postgres database), and then any arguments to be passed through to <code><a href="https://www.rdocumentation.org/packages/DBI/topics/dbConnect">DBI::dbConnect</a></code> along with the driver. For SQLite this is just going to be <code>dbname</code> but for postgres this will include <code>host</code>, <code>port</code>, <code>user</code>, <code>dbname</code> and <code>password</code>. For example:</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">database:</span>
  <span class="fu">source:</span>
    <span class="fu">driver:</span><span class="at"> RSQLite::SQLite</span>
    <span class="fu">host:</span><span class="at"> dbhost</span>
    <span class="fu">port:</span><span class="at"> 5432</span>
    <span class="fu">user:</span><span class="at"> myusername</span>
    <span class="fu">password:</span><span class="at"> s3cret</span>
    <span class="fu">dbname:</span><span class="at"> mydb</span></code></pre></div>
<p>In order to run anything (as below) the working directory must be somewhere above the root. <code>orderly</code> will look in directories up towards the filesystem root for a file <code>orderly_config.yml</code> to determine the root. For Rstudio users, creating an .Rproj file here is probably a good idea.</p>
</div>
<div id="running-a-report" class="section level2">
<h2 class="hasAnchor">
<a href="#running-a-report" class="anchor"></a>Running a report</h2>
<p>Reports are run by <em>name</em>. In the above configuration the report is called <code>example</code> because it is in the directory <code>src/example</code>. A list of report names can be returned by running</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">orderly<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/orderly/topics/orderly_list">orderly_list</a></span>(<span class="dt">root =</span> path)</code></pre></div>
<pre><code>## [1] "example"</code></pre>
<p>If the report requires parameters then these must be passed through too; in the above case the report takes the parameter <code>cyl</code> which must be passed through as a named list. So we might run this report as</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">id &lt;-<span class="st"> </span>orderly<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/orderly/topics/orderly_run">orderly_run</a></span>(<span class="st">"example"</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">cyl =</span> <span class="dv">4</span>), <span class="dt">root =</span> path)
## [ name       ]  example
## [ id         ]  20190813-162502-077dc741
## [ parameter  ]  cyl: 4
## [ data       ]  source =&gt; cars: 11 x 11
## [ start      ]  2019-08-13 16:25:02
## 
## &gt; png("disp_vs_wt.png")
## 
## &gt; plot(disp ~ wt, cars)
## 
## &gt; dev.off()
## png 
##   2 
## 
## &gt; png("distribution.png")
## 
## &gt; hist(cars$disp, main = sprintf("(for %d cylinder cars)", 
## +     cyl))
## 
## &gt; dev.off()
## png 
##   2
## [ end        ]  2019-08-13 16:25:02
## [ elapsed    ]  Ran report in 0.02821279 secs
## [ artefact   ]  disp_vs_wt.png: 8ca9d629f9c0f597fb89e71a25c49bcc
## [ ...        ]  distribution.png: 3ace968f6ba0dd3f6bf3f20c0c9bfb65</code></pre></div>
<p>The return value is the id of the report (also printed on the second line of log output) and is always in the format <code>YYYYMMDD-HHMMSS-abcdef01</code> where the last 8 characters are a hex digits (i.e., 4 random bytes). This means reports will automatically sort nicely but we’ll have some collision resistance.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">id</code></pre></div>
<pre><code>## [1] "20190813-162502-077dc741"</code></pre>
<p>Having run the report, the directory layout now looks like:</p>
<pre class="plain"><code>&lt;root&gt;
|-+= archive
| \--= README.md
|-+= data
| |-+= csv
| | \--= bfcfa73cc080d32294fe6049fe1ac43e.csv
| |-+= rds
| | \--= bfcfa73cc080d32294fe6049fe1ac43e.rds
| \--= README.md
|-+= draft
| |-+= example
| | \-+= 20190813-162502-077dc741
| |   |--= disp_vs_wt.png
| |   |--= distribution.png
| |   |--= orderly_run.rds
| |   |--= orderly.yml
| |   \--= script.R
| \--= README.md
|-+= src
| |-+= example
| | |--= orderly.yml
| | \--= script.R
| \--= README.md
|--= README.md
|--= orderly_config.yml
|--= source.R
\--= source.sqlite</code></pre>
<p>Within <code>drafts</code>, the directory <code>example/20190813-162502-077dc741</code> has been created which contains the result of running the report. In here there are the files:</p>
<ul>
<li>
<code>orderly.yml</code>: this is an exact copy of the input file</li>
<li>
<code>script.R</code>: this is an exact copy of the script used for the analysis</li>
<li>
<code>disp_vs_wt.png</code> and <code>distribution.png</code>: the artefacts created by the report</li>
<li>
<code>orderly_run.rds</code>: this is metadata about the run and includes hashes of input files, of the data used, and of the output etc, along with details about the packages used and the state of git. It is stored in R’s internal data format.</li>
</ul>
<p>Every time a report is run it will create a new directory at this level with a new id. Running the report again now might create the directory <code>example/20190813-162502-2b4a5887</code></p>
<p>Note that there are other files created;</p>
<ul>
<li><code>data/csv/bfcfa73cc080d32294fe6049fe1ac43e.csv</code></li>
<li><code>data/rds/bfcfa73cc080d32294fe6049fe1ac43e.rds</code></li>
</ul>
<p>These are a copy of the data as extracted from the database and used in the report. The filenames are derived from a hash of the contents of the file, so if two reports use the same data then only one copy will be saved (this is quite likely if the upstream data and the query have not changed). Two copies are saved - the rds version is faster to read and write, usually smaller, and is exactly the data as used, while the csv version is more easily read by other applications.</p>
<p>We store the copies of files as run by orderly so that even if the input files change we can still easily get back to previous versions of the inputs, along side the outputs, and these are safe from any changes to the underlying source.</p>
<p>You can see the list of draft reports like so:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">orderly<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/orderly/topics/orderly_list_drafts">orderly_list_drafts</a></span>(<span class="dt">root =</span> path)</code></pre></div>
<pre><code>##      name                       id
## 1 example 20190813-162502-077dc741</code></pre>
<p>Once you’re happy with a report, then “commit” it with</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">orderly<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/orderly/topics/orderly_commit">orderly_commit</a></span>(id, <span class="dt">root =</span> path)
## [ commit     ]  example/20190813-162502-077dc741
## [ copy       ]
## [ import     ]  example:20190813-162502-077dc741
## [ success    ]  :)
## [1] "/tmp/RtmpoIpk6o/file16b5a32af7/archive/example/20190813-162502-077dc741"</code></pre></div>
<p><strong>THIS WILL CHANGE A LITTLE I THINK</strong> - but mostly in how the index is built and how we might synchronise reports across people and machines.</p>
<p>After this step our directory structure looks like:</p>
<pre class="plain"><code>&lt;root&gt;
|-+= archive
| |-+= example
| | \-+= 20190813-162502-077dc741
| |   |--= disp_vs_wt.png
| |   |--= distribution.png
| |   |--= orderly_run.rds
| |   |--= orderly.yml
| |   \--= script.R
| \--= README.md
|-+= data
| |-+= csv
| | \--= bfcfa73cc080d32294fe6049fe1ac43e.csv
| |-+= rds
| | \--= bfcfa73cc080d32294fe6049fe1ac43e.rds
| \--= README.md
|-+= draft
| |-+= example
| | 
| \--= README.md
|-+= src
| |-+= example
| | |--= orderly.yml
| | \--= script.R
| \--= README.md
|--= README.md
|--= orderly_config.yml
|--= orderly.sqlite
|--= source.R
\--= source.sqlite</code></pre>
<p>Which looks very like the previous, but files have been moved from being within <code>draft</code> to being within <code>archive</code>. The other difference is that the index <code>orderly.sqlite</code> has been created.</p>
</div>
<div id="developing-a-report" class="section level2">
<h2 class="hasAnchor">
<a href="#developing-a-report" class="anchor"></a>Developing a report</h2>
<p>First, create a directory within <code>src</code>. The name is important and should not contain spaces (nor should it change as this will change the key report id and you’ll lose a chain of history), then edit the file <code>orderly.yml</code> within that directory.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">orderly<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/orderly/topics/orderly_new">orderly_new</a></span>(<span class="st">"new"</span>, <span class="dt">root =</span> path)</code></pre></div>
<pre><code>## Created report at '/tmp/RtmpoIpk6o/file16b5a32af7/src/new'</code></pre>
<pre><code>## Edit the file 'orderly.yml' within this directory</code></pre>
<p>As a report becomes more complex, the function <code><a href="../reference/orderly_test_start.html">orderly::orderly_test_start</a></code> will become useful; this function creates the isolated environment that orderly uses to run a report, but then leaves you to interactively work with your report.</p>
</div>
<div id="customising-the-configuration" class="section level2">
<h2 class="hasAnchor">
<a href="#customising-the-configuration" class="anchor"></a>Customising the configuration</h2>
<p>The contents of <code>orderly_config.yml</code> may contain things like secrets (passwords) or hostnames that vary depending on deployment (e.g., testing locally vs running on a remote system). To customise this, you can use environment variables within the configuration. So rather than writing</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">database:</span>
  <span class="fu">source:</span>
    <span class="fu">driver:</span><span class="at"> RPostgres::Postgres</span>
    <span class="fu">host:</span><span class="at"> localhost</span>
    <span class="fu">port:</span><span class="at"> 5432</span>
    <span class="fu">user:</span><span class="at"> myuser</span>
    <span class="fu">dbname:</span><span class="at"> databasename</span>
    <span class="fu">password:</span><span class="at"> p4ssw0rd</span></code></pre></div>
<p>you might write</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">database:</span>
  <span class="fu">source:</span>
    <span class="fu">driver:</span><span class="at"> RPostgres::Postgres</span>
    <span class="fu">host:</span><span class="at"> $MY_DBHOST</span>
    <span class="fu">port:</span><span class="at"> $MY_DBPORT</span>
    <span class="fu">user:</span><span class="at"> $MY_DBUSER</span>
    <span class="fu">dbname:</span><span class="at"> $MY_DBNAME</span>
    <span class="fu">password:</span><span class="at"> $MY_PASSWORD</span></code></pre></div>
<p>environment variables, as used this way <strong>must</strong> begin with a dollar sign and consist only of uppercase letters, numbers and the underscore character. You can then set the environment variables in an <code>.Renviron</code> (either within the project or in your home directory) file or your <code>.profile</code> file. Alternatively, you can create a file <code>orderly_envir.yml</code> in the same directory as <code>orderly_config.yml</code> with key-value pairs, such as</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">MY_DBHOST:</span><span class="at"> localhost</span>
<span class="fu">MY_DBPORT:</span><span class="at"> 5432</span>
<span class="fu">MY_DBUSER:</span><span class="at"> myuser</span>
<span class="fu">MY_DBNAME:</span><span class="at"> databasename</span>
<span class="fu">MY_PASSWORD:</span><span class="at"> p4ssw0rd</span></code></pre></div>
<p>This will be read every time that <code>orderly_config.yml</code> is read (in contrast with .Renviron which is read only at the start of a session). This will likely be more pleasant to work with.</p>
<p>The advantage of using environment variables is that you can add the <code>orderly_envir.yml</code> file to your <code>.gitignore</code> and avoid committing system-dependent data to the central repository.</p>
<p>To avoid leaving passwords in plain text, you can use <code>vault</code> to retrieve them. To do this, set the value of the field to <code>VAULT:&lt;path&gt;:&lt;field&gt;</code>, where <code>&lt;path&gt;</code> is the name of a vault secret path (probably beginning with <code>/secret/</code> and <code>field</code> is the name of the field at that path. So, for example:</p>
<pre><code>password: VAULT:/secret/users/database_user:password</code></pre>
<p>would look up the field <code>password</code> at the path <code>/secret/users/database_user</code>. This can be stored in <code>orderly_config.yml</code>, in the contents of an environment variable or in <code>orderly_envir.yml</code>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#the-problem">The problem</a></li>
      <li><a href="#example">Example</a></li>
      <li><a href="#running-a-report">Running a report</a></li>
      <li><a href="#developing-a-report">Developing a report</a></li>
      <li><a href="#customising-the-configuration">Customising the configuration</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Rich FitzJohn, Robert Ashton, Alex Hill, Martin Eden, Wes Hinsley, Emma Russell, James Thompson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
