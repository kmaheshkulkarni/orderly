<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Prepare a directory for orderly to use — orderly_test_start • orderly</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Prepare a directory for orderly to use — orderly_test_start" />

<meta property="og:description" content="For interactive testing of orderly code.  This runs through and
sets everything up as orderly would (creates a new working
directory and changes into it, pulls data from the database,
copies over any dependent reports) but then rather than running
the report hands back to the user.  The prompt looks like
browser but it is just a plain old R prompt and the
code runs in the global environment." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">orderly</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/orderly.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/changelog.html">orderly changelog</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/vimc/orderly">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Prepare a directory for orderly to use</h1>
    <small class="dont-index">Source: <a href='https://github.com/vimc/orderly/blob/master/R/recipe_run.R'><code>R/recipe_run.R</code></a></small>
    <div class="hidden name"><code>orderly_test_start.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>For interactive testing of orderly code.  This runs through and
sets everything up as orderly would (creates a new working
directory and changes into it, pulls data from the database,
copies over any dependent reports) but then rather than running
the report hands back to the user.  The prompt <em>looks</em> like
<code><a href='https://www.rdocumentation.org/packages/base/topics/browser'>browser</a></code> but it is just a plain old R prompt and the
code runs in the global environment.</p>
    
    </div>

    <pre class="usage"><span class='fu'>orderly_test_start</span>(<span class='no'>name</span>, <span class='kw'>parameters</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>envir</span> <span class='kw'>=</span> <span class='no'>.GlobalEnv</span>,
  <span class='kw'>root</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>locate</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>orderly_test_end</span>(<span class='kw'>cleanup</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>orderly_test_restart</span>(<span class='kw'>cleanup</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>orderly_test_check</span>()</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>name</th>
      <td><p>Name of the report to run (see
<code><a href='orderly_list.html'>orderly_list</a></code>).</p></td>
    </tr>
    <tr>
      <th>parameters</th>
      <td><p>Parameters passed to the report. A named list of
parameters declared in the orderly.yml.</p></td>
    </tr>
    <tr>
      <th>envir</th>
      <td><p>The parent of environment to evaluate the report in;
by default a new environment will be made with the global
environment as the parent.</p></td>
    </tr>
    <tr>
      <th>root</th>
      <td><p>The path to an orderly root directory, or <code>NULL</code>
(the default) to search for one from the current working
directory if <code>locate</code> is <code>TRUE</code>).</p></td>
    </tr>
    <tr>
      <th>locate</th>
      <td><p>Logical, indicating if the configuration should be
searched for.  If <code>TRUE</code> and <code>config</code> is not given,
then orderly looks in the working directory and up through its
parents until it finds an <code>orderly_config.yml</code> file.</p></td>
    </tr>
    <tr>
      <th>cleanup</th>
      <td><p>Delete testing directory on exit?  If <code>FALSE</code>
then you will probably want to use <code><a href='orderly_cleanup.html'>orderly_cleanup</a></code>
later to delete the test directory.  Note that it is not
possible to commit the results of an orderly test run</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>To quit run <code>orderly_test_end()</code> (or enter <code>Q</code>, like
<code>browser</code>).  To test if all artefacts have been created run
<code>orderly_test_check()</code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='no'>path</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/orderly/topics/orderly_example'>orderly_example</a></span>(<span class='st'>"minimal"</span>)
<span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/orderly/topics/orderly_test_start'>orderly_test_start</a></span>(<span class='st'>"example"</span>, <span class='kw'>root</span> <span class='kw'>=</span> <span class='no'>path</span>)</div><div class='output co'>#&gt; <span class='message'>[ name       ]  example</span></div><div class='output co'>#&gt; <span class='message'>[ id         ]  20190813-162459-ec63be4e</span></div><div class='output co'>#&gt; <span class='message'>[ data       ]  source =&gt; dat: 20 x 2</span></div><div class='output co'>#&gt; <span class='message'>[ setwd      ]  running in test draft directory</span></div><div class='input'>
<span class='co'># R is now running from the newly created draft directory for this</span>
<span class='co'># report:</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/getwd'>getwd</a></span>()</div><div class='output co'>#&gt; [1] "/tmp/RtmpC4lmv4/filed10ca3b98/draft/example/20190813-162459-ec63be4e"</div><div class='input'>
<span class='co'># The data in the orderly example is now available to use</span>
<span class='no'>dat</span></div><div class='output co'>#&gt;                                name     number
#&gt; 1          displeasing_waterdragons 0.82094629
#&gt; 2            frangible_caimanlizard 0.64706019
#&gt; 3               nitpicking_nabarlek 0.78293276
#&gt; 4                undivined_axisdeer 0.55303631
#&gt; 5                     crazy_cricket 0.52971958
#&gt; 6                   uncongested_gar 0.78935623
#&gt; 7    unsuspecting_africanclawedfrog 0.02333120
#&gt; 8       potential_galapagostortoise 0.47723007
#&gt; 9                    pasty_tapaculo 0.73231374
#&gt; 10 auspicial_europeanfiresalamander 0.69273156
#&gt; 11                    crooked_husky 0.47761962
#&gt; 12              conservable_mallard 0.86120948
#&gt; 13   psychopharmacological_ibisbill 0.43809711
#&gt; 14                 gastric_bobolink 0.24479728
#&gt; 15                  serpentine_slug 0.07067905
#&gt; 16             kimberlite_nighthawk 0.09946616
#&gt; 17            releasable_sanderling 0.31627171
#&gt; 18    worldlywise_asianwaterbuffalo 0.51863426
#&gt; 19                  fungoid_pitbull 0.66200508
#&gt; 20                  sightly_gonolek 0.40683019</div><div class='input'>
<span class='co'># Check to see which artefacts have been created so far:</span>
<span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/orderly/topics/orderly_test_start'>orderly_test_check</a></span>()</div><div class='output co'>#&gt; <span class='message'>[ artefact   ]  mygraph.png: &lt;missing&gt;</span></div><div class='input'>
<span class='co'># Manually the code that this report has in its script</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/grDevices/topics/png'>png</a></span>(<span class='st'>"mygraph.png"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/par'>par</a></span>(<span class='kw'>mar</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>15</span>, <span class='fl'>4</span>, <span class='fl'>.5</span>, <span class='fl'>.5</span>))
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/barplot'>barplot</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/setNames'>setNames</a></span>(<span class='no'>dat</span>$<span class='no'>number</span>, <span class='no'>dat</span>$<span class='no'>name</span>), <span class='kw'>las</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/grDevices/topics/dev'>dev.off</a></span>()</div><div class='output co'>#&gt; pdf 
#&gt;   2 </div><div class='input'>
<span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/orderly/topics/orderly_test_start'>orderly_test_check</a></span>()</div><div class='output co'>#&gt; <span class='message'>[ artefact   ]  mygraph.png: 7360cb2eed3327ff8a677b3598ed7343</span></div><div class='input'>
<span class='co'># Revert back to the original directory:</span>
<span class='kw pkg'>orderly</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/orderly/topics/orderly_test_start'>orderly_test_end</a></span>()</div><div class='output co'>#&gt; <span class='message'>[ setwd      ]  reverting to original directory</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Rich FitzJohn, Robert Ashton, Alex Hill, Martin Eden, Wes Hinsley, Emma Russell, James Thompson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

